import{a as R,b as d,c as j,d as V,e as B,g as I,h as G,i as L,j as $,k as A,l as U,n as H}from"./chunk-VY6Z7W3Z.js";import{a as P}from"./chunk-5AEASSYL.js";import{b as O}from"./chunk-CBGBBNYR.js";import{k as M}from"./chunk-3H224F4N.js";import{$a as g,Ab as T,Da as u,Db as q,Eb as x,Fb as z,Ga as F,N as C,Na as N,Pa as S,Ra as h,W as c,Ya as p,a as y,ba as k,ca as E,db as e,eb as n,fb as l,hb as _,ib as f,lb as r,oa as v,pa as w,sb as D}from"./chunk-XRAK5ADX.js";var Z=(()=>{class t{constructor(){this.formControl=c(j),this.elementRef=c(w),this.renderer=c(F),this.changeDetectorRef=c(T),this.statusChangesSub=null,this.customMessages="",this.defaultMessages={required:"This field is required.",email:"Invalid email address.",minlength:"Too short.",maxlength:"Too long.",pattern:"Invalid format."},this.formControlElement=this.elementRef.nativeElement,this.errorEl=this.renderer.createElement("small")}onBlur(){this.updateErrorDisplay(this.formControl)}ngOnInit(){this.statusChangesSub=this.formControl.statusChanges?.pipe(C(()=>this.updateErrorDisplay(this.formControl))).subscribe()??null,this.updateErrorDisplay(this.formControl)}updateErrorDisplay(o){let a=this.elementRef.nativeElement.parentElement;if(o.invalid&&o.touched){let i=Object.keys(o.errors??{})[0],s=this.customMessages?this.customMessages[i]:this.defaultMessages[i]??"Invalid field";this.errorEl.textContent=s,this.renderer.addClass(this.errorEl,"text-red-500"),this.renderer.addClass(this.formControlElement,"border-red-300"),a.contains(this.errorEl)||this.renderer.appendChild(a,this.errorEl)}else a.contains(this.errorEl)&&(this.renderer.removeChild(a,this.errorEl),this.renderer.removeClass(this.formControlElement,"border-red-300"));this.changeDetectorRef.detectChanges()}ngOnDestroy(){this.statusChangesSub?.unsubscribe()}static{this.\u0275fac=function(a){return new(a||t)}}static{this.\u0275dir=S({type:t,selectors:[["","caFormFieldError",""]],hostBindings:function(a,i){a&1&&f("blur",function(m){return i.onBlur(m)})},inputs:{customMessages:[0,"caFormFieldError","customMessages"]}})}}return t})();function K(t,b){t&1&&r(0," Create ")}function Q(t,b){t&1&&r(0," Update ")}function W(t,b){t&1&&r(0," Create ")}function X(t,b){t&1&&r(0," Update ")}var he=(()=>{class t{#t;#e;constructor(){this.#t=c(O),this.#e=c(U),this.id=v(null),this.selectedContact=x(()=>{let o=this.id();return o?q(()=>this.#t.contactEntityMap()[o]):null}),this.contactForm=this.#e.group({firstName:["",[d.required,d.minLength(3)]],lastName:[""],phone:this.#e.group({number:["",[d.pattern(/^(?:1[-\s]?)?(?:\(\d{3}\)|\d{3})[-.\s]?\d{3}[-.\s]?\d{4}$/)]],extension:["",[d.maxLength(5),d.pattern(/^\d{1,5}$/)]]}),email:["",[d.pattern(/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/)]],company:[""],jobTitle:[""],avatar:["",[d.pattern(/^(https?:\/\/)?(www\.)?[\w\-]+(\.[\w\-]+)+(:\d+)?(\/[^\s]*)?(\?[^\s]*)?(#[^\s]*)?$/)]]}),this.contactName=x(()=>`${this.contactForm.get("firstName")?.value??""} ${this.contactForm.get("lastName")?.value??""}`.trim()),z(()=>{let o=this.selectedContact();o&&this.contactForm.patchValue(y({},o))})}submit(){}onImageError(){this.contactForm.get("profilePicture")?.setErrors({})}static{this.\u0275fac=function(a){return new(a||t)}}static{this.\u0275cmp=N({type:t,selectors:[["ca-create-edit-contact"]],inputs:{id:[1,"id"]},decls:48,vars:6,consts:[[1,"w-auto","flex","flex-col","gap-8","justify-center","bg-white","p-8",3,"formGroup"],[1,"grid","md:grid-cols-2","md:gap-6"],[1,"relative","z-0","w-full","mb-5","group"],["caFormFieldError","","formControlName","firstName","type","text","name","firstName","id","firstName","placeholder"," ","required","",1,"block","py-2.5","px-0","w-full","text-sm","text-gray-900","bg-transparent","border-0","border-b-2","border-gray-300","appearance-none","dark:text-white","dark:border-gray-600","dark:focus:border-blue-500","focus:outline-none","focus:ring-0","focus:border-blue-600","peer"],["for","firstName",1,"peer-focus:font-medium","absolute","text-sm","text-gray-500","dark:text-gray-400","duration-300","transform","-translate-y-6","scale-75","top-3","-z-10","origin-[0]","peer-focus:start-0","rtl:peer-focus:translate-x-1/4","peer-focus:text-blue-600","peer-focus:dark:text-blue-500","peer-placeholder-shown:scale-100","peer-placeholder-shown:translate-y-0","peer-focus:scale-75","peer-focus:-translate-y-6"],["caFormFieldError","","formControlName","lastName","type","text","name","lastName","id","lastName","placeholder"," ","required","",1,"block","py-2.5","px-0","w-full","text-sm","text-gray-900","bg-transparent","border-0","border-b-2","border-gray-300","appearance-none","dark:text-white","dark:border-gray-600","dark:focus:border-blue-500","focus:outline-none","focus:ring-0","focus:border-blue-600","peer"],["for","lastName",1,"peer-focus:font-medium","absolute","text-sm","text-gray-500","dark:text-gray-400","duration-300","transform","-translate-y-6","scale-75","top-3","-z-10","origin-[0]","peer-focus:start-0","rtl:peer-focus:translate-x-1/4","peer-focus:text-blue-600","peer-focus:dark:text-blue-500","peer-placeholder-shown:scale-100","peer-placeholder-shown:translate-y-0","peer-focus:scale-75","peer-focus:-translate-y-6"],["formGroupName","phone",1,"grid","md:grid-cols-2","md:gap-6"],["caFormFieldError","","formControlName","number","type","text","name","number","id","number","placeholder"," ","required","",1,"block","py-2.5","px-0","w-full","text-sm","text-gray-900","bg-transparent","border-0","border-b-2","border-gray-300","appearance-none","dark:text-white","dark:border-gray-600","dark:focus:border-blue-500","focus:outline-none","focus:ring-0","focus:border-blue-600","peer"],["for","number",1,"peer-focus:font-medium","absolute","text-sm","text-gray-500","dark:text-gray-400","duration-300","transform","-translate-y-6","scale-75","top-3","-z-10","origin-[0]","peer-focus:start-0","rtl:peer-focus:translate-x-1/4","peer-focus:text-blue-600","peer-focus:dark:text-blue-500","peer-placeholder-shown:scale-100","peer-placeholder-shown:translate-y-0","peer-focus:scale-75","peer-focus:-translate-y-6"],["caFormFieldError","","formControlName","extension","type","text","name","extension","id","extension","placeholder"," ","required","",1,"block","py-2.5","px-0","w-full","text-sm","text-gray-900","bg-transparent","border-0","border-b-2","border-gray-300","appearance-none","dark:text-white","dark:border-gray-600","dark:focus:border-blue-500","focus:outline-none","focus:ring-0","focus:border-blue-600","peer"],["for","extension",1,"peer-focus:font-medium","absolute","text-sm","text-gray-500","dark:text-gray-400","duration-300","transform","-translate-y-6","scale-75","top-3","-z-10","origin-[0]","peer-focus:start-0","rtl:peer-focus:translate-x-1/4","peer-focus:text-blue-600","peer-focus:dark:text-blue-500","peer-placeholder-shown:scale-100","peer-placeholder-shown:translate-y-0","peer-focus:scale-75","peer-focus:-translate-y-6"],["caFormFieldError","","formControlName","email","type","email","name","email","id","email","placeholder"," ","required","",1,"block","py-2.5","px-0","w-full","text-sm","text-gray-900","bg-transparent","border-0","border-b-2","border-gray-300","appearance-none","dark:text-white","dark:border-gray-600","dark:focus:border-blue-500","focus:outline-none","focus:ring-0","focus:border-blue-600","peer"],["for","email",1,"peer-focus:font-medium","absolute","text-sm","text-gray-500","dark:text-gray-400","duration-300","transform","-translate-y-6","scale-75","top-3","-z-10","origin-[0]","peer-focus:start-0","rtl:peer-focus:translate-x-1/4","rtl:peer-focus:left-auto","peer-focus:text-blue-600","peer-focus:dark:text-blue-500","peer-placeholder-shown:scale-100","peer-placeholder-shown:translate-y-0","peer-focus:scale-75","peer-focus:-translate-y-6"],["caFormFieldError","","formControlName","company","type","text","name","company","id","company","placeholder"," ","required","",1,"block","py-2.5","px-0","w-full","text-sm","text-gray-900","bg-transparent","border-0","border-b-2","border-gray-300","appearance-none","dark:text-white","dark:border-gray-600","dark:focus:border-blue-500","focus:outline-none","focus:ring-0","focus:border-blue-600","peer"],["for","company",1,"peer-focus:font-medium","absolute","text-sm","text-gray-500","dark:text-gray-400","duration-300","transform","-translate-y-6","scale-75","top-3","-z-10","origin-[0]","peer-focus:start-0","rtl:peer-focus:translate-x-1/4","peer-focus:text-blue-600","peer-focus:dark:text-blue-500","peer-placeholder-shown:scale-100","peer-placeholder-shown:translate-y-0","peer-focus:scale-75","peer-focus:-translate-y-6"],["caFormFieldError","","formControlName","jobTitle","type","text","name","jobTitle","id","jobTitle","placeholder"," ","required","",1,"block","py-2.5","px-0","w-full","text-sm","text-gray-900","bg-transparent","border-0","border-b-2","border-gray-300","appearance-none","dark:text-white","dark:border-gray-600","dark:focus:border-blue-500","focus:outline-none","focus:ring-0","focus:border-blue-600","peer"],["for","jobTitle",1,"peer-focus:font-medium","absolute","text-sm","text-gray-500","dark:text-gray-400","duration-300","transform","-translate-y-6","scale-75","top-3","-z-10","origin-[0]","peer-focus:start-0","rtl:peer-focus:translate-x-1/4","peer-focus:text-blue-600","peer-focus:dark:text-blue-500","peer-placeholder-shown:scale-100","peer-placeholder-shown:translate-y-0","peer-focus:scale-75","peer-focus:-translate-y-6"],["caFormFieldError","","formControlName","avatar","type","text","name","avatar","id","avatar","placeholder"," ","required","",1,"block","py-2.5","px-0","w-full","text-sm","text-gray-900","bg-transparent","border-0","border-b-2","border-gray-300","appearance-none","dark:text-white","dark:border-gray-600","dark:focus:border-blue-500","focus:outline-none","focus:ring-0","focus:border-blue-600","peer"],["for","avatar",1,"peer-focus:font-medium","absolute","text-sm","text-gray-500","dark:text-gray-400","duration-300","transform","-translate-y-6","scale-75","top-3","-z-10","origin-[0]","peer-focus:start-0","rtl:peer-focus:translate-x-1/4","peer-focus:text-blue-600","peer-focus:dark:text-blue-500","peer-placeholder-shown:scale-100","peer-placeholder-shown:translate-y-0","peer-focus:scale-75","peer-focus:-translate-y-6"],[3,"name","imageUrl"],[1,"flex","flex-row-reverse","gap-6"],[1,"text-white","bg-blue-700","hover:bg-blue-800","focus:ring-4","focus:ring-blue-300","font-medium","rounded-lg","text-sm","px-5","py-2.5","me-2","mb-2","dark:bg-blue-600","dark:hover:bg-blue-700","focus:outline-none","dark:focus:ring-blue-800",3,"click","disabled"]],template:function(a,i){if(a&1){let s=_();D(0),e(1,"form",0)(2,"h2"),h(3,K,1,0)(4,Q,1,0),r(5," Contact"),n(),e(6,"div",1)(7,"div",2),l(8,"input",3),e(9,"label",4),r(10,"First name"),n()(),e(11,"div",2),l(12,"input",5),e(13,"label",6),r(14,"Last name"),n()()(),e(15,"div",7)(16,"div",2),l(17,"input",8),e(18,"label",9),r(19,"Phone"),n()(),e(20,"div",2),l(21,"input",10),e(22,"label",11),r(23,"Extension"),n()()(),e(24,"div",2),l(25,"input",12),e(26,"label",13),r(27,"Email"),n()(),e(28,"div",1)(29,"div",2),l(30,"input",14),e(31,"label",15),r(32,"Company"),n()(),e(33,"div",2),l(34,"input",16),e(35,"label",17),r(36,"Job title"),n()()(),e(37,"div",1)(38,"div",2),l(39,"input",18),e(40,"label",19),r(41,"Profile image URL"),n()(),e(42,"div",2),l(43,"ca-avatar",20),n()(),e(44,"div",21)(45,"button",22),f("click",function(){return k(s),E(i.submit())}),h(46,W,1,0)(47,X,1,0),n()()()}if(a&2){let s,m=i.selectedContact();u(),p("formGroup",i.contactForm),u(2),g(m?4:3),u(40),p("name",i.contactName())("imageUrl",(s=(s=i.contactForm.get("avatar"))==null?null:s.value)!==null&&s!==void 0?s:""),u(2),p("disabled",!i.contactForm.valid),u(),g(m?47:46)}},dependencies:[M,H,I,R,V,B,A,G,$,L,Z,P],encapsulation:2})}}return t})();export{he as CreateEditContactComponent};
