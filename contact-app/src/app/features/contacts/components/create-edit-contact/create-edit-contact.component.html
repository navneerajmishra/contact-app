@let contact = selectedContact();

<form
    [formGroup]="contactForm"
    class="w-auto flex flex-col gap-8 justify-center bg-white p-8"
    aria-labelledby="contact-form-title"
    autocomplete="off"
    novalidate
>
    <h2 id="contact-form-title" tabindex="-1">
        @if (!contact) { Create } @else { Update } Contact
    </h2>

    <div class="grid md:grid-cols-2 md:gap-6">
        <div class="relative z-0 w-full mb-5 group">
            <input
                caFormFieldError
                formControlName="firstName"
                type="text"
                name="firstName"
                id="firstName"
                class="block py-2.5 px-0 w-full text-sm text-gray-900 bg-transparent border-0 border-b-2 border-gray-300 appearance-none focus:outline-none focus:ring-0 focus:border-blue-600 peer"
                required
                aria-required="true"
                autocomplete="given-name"
            />
            <label
                for="firstName"
                class="peer-focus:font-medium absolute text-sm text-gray-500 duration-300 transform -translate-y-6 scale-75 top-3 -z-10 origin-[0] peer-focus:start-0 rtl:peer-focus:translate-x-1/4 peer-focus:text-blue-600 peer-placeholder-shown:scale-100 peer-placeholder-shown:translate-y-0 peer-focus:scale-75 peer-focus:-translate-y-6"
                >First name</label
            >
        </div>
        <div class="relative z-0 w-full mb-5 group">
            <input
                caFormFieldError
                formControlName="lastName"
                type="text"
                name="lastName"
                id="lastName"
                class="block py-2.5 px-0 w-full text-sm text-gray-900 bg-transparent border-0 border-b-2 border-gray-300 appearance-none focus:outline-none focus:ring-0 focus:border-blue-600 peer"
            />
            <label
                for="lastName"
                class="peer-focus:font-medium absolute text-sm text-gray-500 duration-300 transform -translate-y-6 scale-75 top-3 -z-10 origin-[0] peer-focus:start-0 rtl:peer-focus:translate-x-1/4 peer-focus:text-blue-600 peer-placeholder-shown:scale-100 peer-placeholder-shown:translate-y-0 peer-focus:scale-75 peer-focus:-translate-y-6"
                >Last name</label
            >
        </div>
    </div>

    <div formGroupName="phone" class="grid md:grid-cols-2 md:gap-6">
        <div class="relative z-0 w-full mb-5 group">
            <input
                caFormFieldError
                formControlName="number"
                type="tel"
                name="number"
                id="number"
                class="block py-2.5 px-0 w-full text-sm text-gray-900 bg-transparent border-0 border-b-2 border-gray-300 appearance-none focus:outline-none focus:ring-0 focus:border-blue-600 peer"
                required
                aria-required="true"
                autocomplete="tel"
                inputmode="tel"
                aria-label="Phone number"
            />
            <label
                for="number"
                class="peer-focus:font-medium absolute text-sm text-gray-500 duration-300 transform -translate-y-6 scale-75 top-3 -z-10 origin-[0] peer-focus:start-0 rtl:peer-focus:translate-x-1/4 peer-focus:text-blue-600 peer-placeholder-shown:scale-100 peer-placeholder-shown:translate-y-0 peer-focus:scale-75 peer-focus:-translate-y-6"
                >Phone</label
            >
        </div>
        <div class="relative z-0 w-full mb-5 group">
            <input
                caFormFieldError
                formControlName="extension"
                type="text"
                name="extension"
                id="extension"
                class="block py-2.5 px-0 w-full text-sm text-gray-900 bg-transparent border-0 border-b-2 border-gray-300 appearance-none focus:outline-none focus:ring-0 focus:border-blue-600 peer"
                aria-label="Phone extension"
                autocomplete="off"
            />
            <label
                for="extension"
                class="peer-focus:font-medium absolute text-sm text-gray-500 duration-300 transform -translate-y-6 scale-75 top-3 -z-10 origin-[0] peer-focus:start-0 rtl:peer-focus:translate-x-1/4 peer-focus:text-blue-600 peer-placeholder-shown:scale-100 peer-placeholder-shown:translate-y-0 peer-focus:scale-75 peer-focus:-translate-y-6"
                >Extension</label
            >
        </div>
    </div>

    <div class="grid md:grid-cols-3 md:gap-6">
        <div class="relative z-0 w-full mb-5 group">
            <input
                caFormFieldError
                formControlName="email"
                type="email"
                name="email"
                id="email"
                class="block py-2.5 px-0 w-full text-sm text-gray-900 bg-transparent border-0 border-b-2 border-gray-300 appearance-none focus:outline-none focus:ring-0 focus:border-blue-600 peer"
            />
            <label
                for="email"
                class="peer-focus:font-medium absolute text-sm text-gray-500 duration-300 transform -translate-y-6 scale-75 top-3 -z-10 origin-[0] peer-focus:start-0 rtl:peer-focus:translate-x-1/4 rtl:peer-focus:left-auto peer-focus:text-blue-600 peer-placeholder-shown:scale-100 peer-placeholder-shown:translate-y-0 peer-focus:scale-75 peer-focus:-translate-y-6"
                >Email</label
            >
        </div>
        <div class="relative z-0 w-full mb-5 group">
            <input
                caFormFieldError
                formControlName="company"
                type="text"
                name="company"
                id="company"
                class="block py-2.5 px-0 w-full text-sm text-gray-900 bg-transparent border-0 border-b-2 border-gray-300 appearance-none focus:outline-none focus:ring-0 focus:border-blue-600 peer"
            />
            <label
                for="company"
                class="peer-focus:font-medium absolute text-sm text-gray-500 duration-300 transform -translate-y-6 scale-75 top-3 -z-10 origin-[0] peer-focus:start-0 rtl:peer-focus:translate-x-1/4 peer-focus:text-blue-600 peer-placeholder-shown:scale-100 peer-placeholder-shown:translate-y-0 peer-focus:scale-75 peer-focus:-translate-y-6"
                >Company</label
            >
        </div>
        <div class="relative z-0 w-full mb-5 group">
            <input
                caFormFieldError
                formControlName="jobTitle"
                type="text"
                name="jobTitle"
                id="jobTitle"
                class="block py-2.5 px-0 w-full text-sm text-gray-900 bg-transparent border-0 border-b-2 border-gray-300 appearance-none focus:outline-none focus:ring-0 focus:border-blue-600 peer"
            />
            <label
                for="jobTitle"
                class="peer-focus:font-medium absolute text-sm text-gray-500 duration-300 transform -translate-y-6 scale-75 top-3 -z-10 origin-[0] peer-focus:start-0 rtl:peer-focus:translate-x-1/4 peer-focus:text-blue-600 peer-placeholder-shown:scale-100 peer-placeholder-shown:translate-y-0 peer-focus:scale-75 peer-focus:-translate-y-6"
                >Job title</label
            >
        </div>
    </div>
    <div class="grid md:grid-cols-2 md:gap-6">
        <div class="relative z-0 w-full mb-5 group">
            <input
                caFormFieldError
                formControlName="avatar"
                type="url"
                name="avatar"
                id="avatar"
                class="block py-2.5 px-0 w-full text-sm text-gray-900 bg-transparent border-0 border-b-2 border-gray-300 appearance-none focus:outline-none focus:ring-0 focus:border-blue-600 peer"
                aria-label="Profile image URL"
                autocomplete="url"
                inputmode="url"
            />
            <label
                for="avatar"
                class="peer-focus:font-medium absolute text-sm text-gray-500 duration-300 transform -translate-y-6 scale-75 top-3 -z-10 origin-[0] peer-focus:start-0 rtl:peer-focus:translate-x-1/4 peer-focus:text-blue-600 peer-placeholder-shown:scale-100 peer-placeholder-shown:translate-y-0 peer-focus:scale-75 peer-focus:-translate-y-6"
                >Profile image URL</label
            >
        </div>
        <div class="relative z-0 w-full mb-5 group">
            <ca-avatar
                [name]="selectedContact()?.firstName"
                [imageUrl]="contactForm.get('avatar')?.value ?? ''"
                aria-label="Avatar preview"
            ></ca-avatar>
        </div>
    </div>

    <div class="flex flex-row-reverse gap-6">
        <button
            class="text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 me-2 mb-2 disabled:bg-blue-200 focus:outline-none"
            [disabled]="!contactForm.valid"
            (click)="submit()"
            type="submit"
            aria-label="@if (!contact) { Create } @else { Update } contact"
        >
            @if (!contact) { Create } @else { Update }
        </button>
    </div>
</form>
