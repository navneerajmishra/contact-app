import{b as q,c,d as U,e as A,f as V,g as B,h as L,i as G,j as I,k as $,l as P,m as H}from"./chunk-G7ETLRQ4.js";import{a as O,c as Z}from"./chunk-KYY6AEEQ.js";import{d as M,h as R}from"./chunk-VHMHPLZL.js";import{Ab as z,Ca as p,Eb as x,Fa as _,Fb as j,M as C,Ma as S,Oa as T,Qa as h,V as l,Xa as d,_a as g,a as v,aa as F,ba as E,cb as e,db as i,eb as s,gb as D,hb as f,lb as a,na as w,oa as N,sb as k}from"./chunk-O7LGMGVH.js";var J=(()=>{class t{#e;#r;#t;#s;#o;#a;#n;constructor(){this.#e=l(U),this.#r=l(N),this.#t=l(_),this.#s=l(z),this.#n=null,this.customMessages="",this.#l={required:"This field is required.",email:"Invalid email address.",minlength:"Too short.",maxlength:"Too long.",pattern:"Invalid format."},this.#a=this.#r.nativeElement,this.#o=this.#t.createElement("small")}onBlur(){this.#i(this.#e)}ngOnInit(){this.#n=this.#e.statusChanges?.pipe(C(()=>this.#i(this.#e))).subscribe()??null,this.#i(this.#e)}#i(r){let o=this.#r.nativeElement.parentElement;if(r.invalid&&r.touched){let n=Object.keys(r.errors??{})[0],u=this.customMessages?this.customMessages[n]:this.#l[n]??"Invalid field";this.#o.textContent=u,this.#t.addClass(this.#o,"text-red-500"),this.#t.addClass(this.#a,"border-red-300"),o.contains(this.#o)||this.#t.appendChild(o,this.#o)}else o.contains(this.#o)&&(this.#t.removeChild(o,this.#o),this.#t.removeClass(this.#a,"border-red-300"));this.#s.detectChanges()}#l;ngOnDestroy(){this.#n?.unsubscribe()}static{this.\u0275fac=function(o){return new(o||t)}}static{this.\u0275dir=T({type:t,selectors:[["","caFormFieldError",""]],hostBindings:function(o,n){o&1&&f("blur",function(m){return n.onBlur(m)})},inputs:{customMessages:[0,"caFormFieldError","customMessages"]}})}}return t})();function Q(t,b){t&1&&a(0," Create ")}function W(t,b){t&1&&a(0," Update ")}function X(t,b){t&1&&a(0," Create ")}function Y(t,b){t&1&&a(0," Update ")}var xe=(()=>{class t{#e;#r;#t;constructor(){this.#e=l(Z),this.#r=l(P),this.#t=l(R),this.id=w(null),this.selectedContact=x(()=>{let r=this.id();return r?this.#e.contactEntityMap()[r]:null}),this.contactForm=this.#r.group({firstName:["",[c.required,c.minLength(3)]],lastName:[""],phone:this.#r.group({number:["",[c.required,c.pattern(/^(?:1[-\s]?)?(?:\(\d{3}\)|\d{3})[-.\s]?\d{3}[-.\s]?\d{4}$/)]],extension:["",[c.maxLength(5),c.pattern(/^\d{0,5}$/)]]}),email:["",[c.pattern(/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/)]],company:[""],jobTitle:[""],avatar:["",[c.pattern(/^(https?:\/\/)?(www\.)?[\w\-]+(\.[\w\-]+)+(:\d+)?(\/[^\s]*)?(\?[^\s]*)?(#[^\s]*)?$/)]]}),this.contactName=x(()=>`${this.contactForm.get("firstName")?.value??""} ${this.contactForm.get("lastName")?.value??""}`.trim()),j(()=>{let r=this.selectedContact();r&&this.contactForm.patchValue(v({},r))})}submit(){let r=this.id();if(this.contactForm.invalid){this.contactForm.markAllAsTouched();return}let o={id:r,firstName:this.contactForm.get("firstName").value.trim(),lastName:this.contactForm.get("lastName")?.value?.trim()??"",phone:{number:this.contactForm.get("phone.number").value.trim(),extension:this.contactForm.get("phone.extension")?.value?.trim()??""},email:this.contactForm.get("email")?.value?.trim()??"",company:this.contactForm.get("company")?.value?.trim()??"",jobTitle:this.contactForm.get("jobTitle")?.value?.trim()??"",avatar:this.contactForm.get("avatar")?.value?.trim()??""};(r?this.#e.optimisticUpdate(r,o):this.#e.create(o)).then(()=>{this.contactForm.reset(),this.#t.navigate(["/contacts"])})}static{this.\u0275fac=function(o){return new(o||t)}}static{this.\u0275cmp=S({type:t,selectors:[["ca-create-edit-contact"]],inputs:{id:[1,"id"]},decls:48,vars:6,consts:[["aria-labelledby","contact-form-title","autocomplete","off","novalidate","",1,"w-auto","flex","flex-col","gap-8","justify-center","bg-white","p-8",3,"formGroup"],["id","contact-form-title","tabindex","-1"],[1,"grid","md:grid-cols-2","md:gap-6"],[1,"relative","z-0","w-full","mb-5","group"],["caFormFieldError","","formControlName","firstName","type","text","name","firstName","id","firstName","required","","aria-required","true","autocomplete","given-name",1,"block","py-2.5","px-0","w-full","text-sm","text-gray-900","bg-transparent","border-0","border-b-2","border-gray-300","appearance-none","focus:outline-none","focus:ring-0","focus:border-blue-600","peer"],["for","firstName",1,"peer-focus:font-medium","absolute","text-sm","text-gray-500","duration-300","transform","-translate-y-6","scale-75","top-3","-z-10","origin-[0]","peer-focus:start-0","rtl:peer-focus:translate-x-1/4","peer-focus:text-blue-600","peer-placeholder-shown:scale-100","peer-placeholder-shown:translate-y-0","peer-focus:scale-75","peer-focus:-translate-y-6"],["caFormFieldError","","formControlName","lastName","type","text","name","lastName","id","lastName",1,"block","py-2.5","px-0","w-full","text-sm","text-gray-900","bg-transparent","border-0","border-b-2","border-gray-300","appearance-none","focus:outline-none","focus:ring-0","focus:border-blue-600","peer"],["for","lastName",1,"peer-focus:font-medium","absolute","text-sm","text-gray-500","duration-300","transform","-translate-y-6","scale-75","top-3","-z-10","origin-[0]","peer-focus:start-0","rtl:peer-focus:translate-x-1/4","peer-focus:text-blue-600","peer-placeholder-shown:scale-100","peer-placeholder-shown:translate-y-0","peer-focus:scale-75","peer-focus:-translate-y-6"],["formGroupName","phone",1,"grid","md:grid-cols-2","md:gap-6"],["caFormFieldError","","formControlName","number","type","tel","name","number","id","number","required","","aria-required","true","autocomplete","tel","inputmode","tel","aria-label","Phone number",1,"block","py-2.5","px-0","w-full","text-sm","text-gray-900","bg-transparent","border-0","border-b-2","border-gray-300","appearance-none","focus:outline-none","focus:ring-0","focus:border-blue-600","peer"],["for","number",1,"peer-focus:font-medium","absolute","text-sm","text-gray-500","duration-300","transform","-translate-y-6","scale-75","top-3","-z-10","origin-[0]","peer-focus:start-0","rtl:peer-focus:translate-x-1/4","peer-focus:text-blue-600","peer-placeholder-shown:scale-100","peer-placeholder-shown:translate-y-0","peer-focus:scale-75","peer-focus:-translate-y-6"],["caFormFieldError","","formControlName","extension","type","text","name","extension","id","extension","aria-label","Phone extension","autocomplete","off",1,"block","py-2.5","px-0","w-full","text-sm","text-gray-900","bg-transparent","border-0","border-b-2","border-gray-300","appearance-none","focus:outline-none","focus:ring-0","focus:border-blue-600","peer"],["for","extension",1,"peer-focus:font-medium","absolute","text-sm","text-gray-500","duration-300","transform","-translate-y-6","scale-75","top-3","-z-10","origin-[0]","peer-focus:start-0","rtl:peer-focus:translate-x-1/4","peer-focus:text-blue-600","peer-placeholder-shown:scale-100","peer-placeholder-shown:translate-y-0","peer-focus:scale-75","peer-focus:-translate-y-6"],[1,"grid","md:grid-cols-3","md:gap-6"],["caFormFieldError","","formControlName","email","type","email","name","email","id","email",1,"block","py-2.5","px-0","w-full","text-sm","text-gray-900","bg-transparent","border-0","border-b-2","border-gray-300","appearance-none","focus:outline-none","focus:ring-0","focus:border-blue-600","peer"],["for","email",1,"peer-focus:font-medium","absolute","text-sm","text-gray-500","duration-300","transform","-translate-y-6","scale-75","top-3","-z-10","origin-[0]","peer-focus:start-0","rtl:peer-focus:translate-x-1/4","rtl:peer-focus:left-auto","peer-focus:text-blue-600","peer-placeholder-shown:scale-100","peer-placeholder-shown:translate-y-0","peer-focus:scale-75","peer-focus:-translate-y-6"],["caFormFieldError","","formControlName","company","type","text","name","company","id","company",1,"block","py-2.5","px-0","w-full","text-sm","text-gray-900","bg-transparent","border-0","border-b-2","border-gray-300","appearance-none","focus:outline-none","focus:ring-0","focus:border-blue-600","peer"],["for","company",1,"peer-focus:font-medium","absolute","text-sm","text-gray-500","duration-300","transform","-translate-y-6","scale-75","top-3","-z-10","origin-[0]","peer-focus:start-0","rtl:peer-focus:translate-x-1/4","peer-focus:text-blue-600","peer-placeholder-shown:scale-100","peer-placeholder-shown:translate-y-0","peer-focus:scale-75","peer-focus:-translate-y-6"],["caFormFieldError","","formControlName","jobTitle","type","text","name","jobTitle","id","jobTitle",1,"block","py-2.5","px-0","w-full","text-sm","text-gray-900","bg-transparent","border-0","border-b-2","border-gray-300","appearance-none","focus:outline-none","focus:ring-0","focus:border-blue-600","peer"],["for","jobTitle",1,"peer-focus:font-medium","absolute","text-sm","text-gray-500","duration-300","transform","-translate-y-6","scale-75","top-3","-z-10","origin-[0]","peer-focus:start-0","rtl:peer-focus:translate-x-1/4","peer-focus:text-blue-600","peer-placeholder-shown:scale-100","peer-placeholder-shown:translate-y-0","peer-focus:scale-75","peer-focus:-translate-y-6"],["caFormFieldError","","formControlName","avatar","type","url","name","avatar","id","avatar","aria-label","Profile image URL","autocomplete","url","inputmode","url",1,"block","py-2.5","px-0","w-full","text-sm","text-gray-900","bg-transparent","border-0","border-b-2","border-gray-300","appearance-none","focus:outline-none","focus:ring-0","focus:border-blue-600","peer"],["for","avatar",1,"peer-focus:font-medium","absolute","text-sm","text-gray-500","duration-300","transform","-translate-y-6","scale-75","top-3","-z-10","origin-[0]","peer-focus:start-0","rtl:peer-focus:translate-x-1/4","peer-focus:text-blue-600","peer-placeholder-shown:scale-100","peer-placeholder-shown:translate-y-0","peer-focus:scale-75","peer-focus:-translate-y-6"],["aria-label","Avatar preview",3,"name","imageUrl"],[1,"flex","flex-row-reverse","gap-6"],["type","submit","aria-label","@if (!contact) { Create } @else { Update } contact",1,"text-white","bg-blue-700","hover:bg-blue-800","focus:ring-4","focus:ring-blue-300","font-medium","rounded-lg","text-sm","px-5","py-2.5","me-2","mb-2","disabled:bg-blue-200","focus:outline-none",3,"click","disabled"]],template:function(o,n){if(o&1){let u=D();k(0),e(1,"form",0)(2,"h2",1),h(3,Q,1,0)(4,W,1,0),a(5," Contact "),i(),e(6,"div",2)(7,"div",3),s(8,"input",4),e(9,"label",5),a(10,"First name"),i()(),e(11,"div",3),s(12,"input",6),e(13,"label",7),a(14,"Last name"),i()()(),e(15,"div",8)(16,"div",3),s(17,"input",9),e(18,"label",10),a(19,"Phone"),i()(),e(20,"div",3),s(21,"input",11),e(22,"label",12),a(23,"Extension"),i()()(),e(24,"div",13)(25,"div",3),s(26,"input",14),e(27,"label",15),a(28,"Email"),i()(),e(29,"div",3),s(30,"input",16),e(31,"label",17),a(32,"Company"),i()(),e(33,"div",3),s(34,"input",18),e(35,"label",19),a(36,"Job title"),i()()(),e(37,"div",2)(38,"div",3),s(39,"input",20),e(40,"label",21),a(41,"Profile image URL"),i()(),e(42,"div",3),s(43,"ca-avatar",22),i()(),e(44,"div",23)(45,"button",24),f("click",function(){return F(u),E(n.submit())}),h(46,X,1,0)(47,Y,1,0),i()()()}if(o&2){let u,m,y=n.selectedContact();p(),d("formGroup",n.contactForm),p(2),g(y?4:3),p(40),d("name",(u=n.selectedContact())==null?null:u.firstName)("imageUrl",(m=(m=n.contactForm.get("avatar"))==null?null:m.value)!==null&&m!==void 0?m:""),p(2),d("disabled",!n.contactForm.valid),p(),g(y?47:46)}},dependencies:[M,H,B,q,A,V,$,L,I,G,J,O],encapsulation:2})}}return t})();export{xe as CreateEditContactComponent};
