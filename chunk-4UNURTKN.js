import{e as G,f as H,g as d,h as $,i as A,j as L,l as P,m as U,n as q,o as z,p as O,r as Z}from"./chunk-R6EJAAEB.js";import{a as K}from"./chunk-XX3WOZGW.js";import{a as J}from"./chunk-M6OAQ2DG.js";import{$a as R,Fa as S,Ha as D,Ja as f,M as b,Oa as C,Ra as g,V as s,Va as n,Wa as t,Xa as m,Ya as T,Za as M,a as x,aa as v,ab as u,ba as F,fb as i,hb as j,ka as N,la as w,mb as I,s as y,sb as k,vb as B,wa as c,wb as E,xb as V,za as _}from"./chunk-PLQDF3RK.js";var Q=(()=>{class r{constructor(){this.formControl=s($),this.elementRef=s(w),this.renderer=s(_),this.changeDetectorRef=s(k),this.statusChangesSub=null,this.customMessages="",this.defaultMessages={required:"This field is required.",email:"Invalid email address.",minlength:"Too short.",maxlength:"Too long.",pattern:"Invalid format."},this.formControlElement=this.elementRef.nativeElement,this.errorEl=this.renderer.createElement("small")}onBlur(e){let o=this.elementRef.nativeElement.parentElement;this.updateErrorDisplay(this.formControl)}ngOnInit(){this.statusChangesSub=this.formControl.statusChanges?.pipe(b(e=>console.log(this.formControl.name,e)),y(e=>this.updateErrorDisplay(this.formControl))).subscribe()??null,this.updateErrorDisplay(this.formControl)}updateErrorDisplay(e){console.log(e.invalid,e.dirty,e.touched,e.pristine);let o=this.elementRef.nativeElement.parentElement;if(e.invalid&&e.touched){let a=Object.keys(e.errors??{})[0],l=this.customMessages?this.customMessages[a]:this.defaultMessages[a]??"Invalid field";this.errorEl.textContent=l,this.renderer.addClass(this.errorEl,"text-red-500"),this.renderer.addClass(this.formControlElement,"border-red-300"),o.contains(this.errorEl)||this.renderer.appendChild(o,this.errorEl)}else o.contains(this.errorEl)&&(this.renderer.removeChild(o,this.errorEl),this.renderer.removeClass(this.formControlElement,"border-red-300"));this.changeDetectorRef.detectChanges()}ngOnDestroy(){this.statusChangesSub?.unsubscribe()}static{this.\u0275fac=function(o){return new(o||r)}}static{this.\u0275dir=D({type:r,selectors:[["","caFormFieldError",""]],hostBindings:function(o,a){o&1&&u("blur",function(p){return a.onBlur(p)})},inputs:{customMessages:[0,"caFormFieldError","customMessages"]}})}}return r})();function X(r,h){r&1&&i(0," Create ")}function Y(r,h){r&1&&i(0," Update ")}function ee(r,h){r&1&&i(0," Create ")}function te(r,h){r&1&&i(0," Update ")}var xe=(()=>{class r{#t;#e;constructor(){this.#t=s(J),this.#e=s(O),this.id=N(null),this.selectedContact=E(()=>{let e=this.id();return e?B(()=>this.#t.contactEntityMap()[e]):null}),this.contactForm=this.#e.group({firstName:["",[d.required,d.minLength(3)]],lastName:[""],phone:this.#e.group({number:["",[d.pattern(/^(?:1[-\s]?)?(?:\(\d{3}\)|\d{3})[-.\s]?\d{3}[-.\s]?\d{4}$/)]],extension:["",[d.maxLength(5),d.pattern(/^\d{1,5}$/)]]}),email:["",[d.pattern(/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/)]],company:[""],jobTitle:[""],avatar:["",[d.pattern(/^(https?:\/\/)?(www\.)?[\w\-]+(\.[\w\-]+)+(:\d+)?(\/[^\s]*)?(\?[^\s]*)?(#[^\s]*)?$/)]]}),this.contactName=E(()=>`${this.contactForm.get("firstName")?.value??""} ${this.contactForm.get("lastName")?.value??""}`.trim()),V(()=>{let e=this.selectedContact();e&&this.contactForm.patchValue(x({},e))})}submit(){}onImageError(){this.contactForm.get("profilePicture")?.setErrors({})}static{this.\u0275fac=function(o){return new(o||r)}}static{this.\u0275cmp=S({type:r,selectors:[["ca-create-edit-contact"]],inputs:{id:[1,"id"]},decls:47,vars:6,consts:[[1,"w-auto","flex","flex-col","gap-8","justify-center","bg-white","p-8",3,"formGroup"],[1,"flex","flex-col","gap-4"],["for","firstName"],["type","text","id","firstName","formControlName","firstName","placeholder","e.g. Richard","caFormFieldError","",1,"border","rounded","w-4/12","py-1","px-2","placeholder:text-gray-300","placeholder:italic"],["for","lastName"],["caFormFieldError","","type","text","id","lastName","formControlName","lastName","placeholder","e.g. Hendricks",1,"border","rounded","w-4/12","py-1","px-2","placeholder:text-gray-300","placeholder:italic"],["formGroupName","phone"],["for","number"],["caFormFieldError","","type","tel","id","number","formControlName","number","placeholder","e.g. 1-594-913-9901",1,"border","rounded","w-4/12","py-1","px-2","placeholder:text-gray-300","placeholder:italic"],["for","extension"],["caFormFieldError","","type","tel","id","extension","formControlName","extension","placeholder","e.g. 2345",1,"border","rounded","w-4/12","py-1","px-2","placeholder:text-gray-300","placeholder:italic"],["for","email"],["caFormFieldError","","type","email","id","email","formControlName","email","placeholder","e.g. richard.hendricks@hooli.com",1,"border","rounded","w-4/12","py-1","px-2","placeholder:text-gray-300","placeholder:italic"],["for","company"],["caFormFieldError","","type","text","id","company","formControlName","company","placeholder","e.g. Hooli",1,"border","rounded","w-4/12","py-1","px-2","placeholder:text-gray-300","placeholder:italic"],["for","jobTitle"],["caFormFieldError","","type","text","id","jobTitle","formControlName","jobTitle","placeholder","e.g. Software Engineer",1,"border","rounded","w-4/12","py-1","px-2","placeholder:text-gray-300","placeholder:italic"],["for","profilePicture"],["caFormFieldError","","type","text","id","profilePicture","formControlName","avatar","placeholder","e.g. http://www.hooli.com/images/richard.jpg",1,"border","rounded","w-1/2","py-1","px-2","placeholder:text-gray-300","placeholder:italic"],[3,"name","imageUrl"],[1,"flex","flex-row-reverse","gap-6"],[1,"border","rounded","bg-blue-300","px-2","py-1","cursor-auto",3,"click"],["type","reset",1,"border","rounded","px-2","py-1","cursor-pointer"]],template:function(o,a){if(o&1){let l=R();I(0),n(1,"form",0)(2,"h2"),f(3,X,1,0)(4,Y,1,0),i(5," Contact "),t(),n(6,"div",1)(7,"label",2),i(8,"First name"),t(),m(9,"input",3),t(),n(10,"div",1)(11,"label",4),i(12,"Last name"),t(),m(13,"input",5),t(),T(14,6),n(15,"div",1)(16,"label",7),i(17,"Phone"),t(),m(18,"input",8),t(),n(19,"div",1)(20,"label",9),i(21,"Extension"),t(),m(22,"input",10),t(),M(),n(23,"div",1)(24,"label",11),i(25,"Email"),t(),m(26,"input",12),t(),n(27,"div",1)(28,"label",13),i(29,"Company"),t(),m(30,"input",14),t(),n(31,"div",1)(32,"label",15),i(33,"Job Title"),t(),m(34,"input",16),t(),n(35,"div",1)(36,"label",17),i(37,"Profile picture"),t(),m(38,"input",18)(39,"ca-avatar",19),t(),n(40,"div",20),i(41),n(42,"button",21),u("click",function(){return v(l),F(a.submit())}),f(43,ee,1,0)(44,te,1,0),t(),n(45,"button",22),i(46,"Reset"),t()()()}if(o&2){let l,p=a.selectedContact();c(),C("formGroup",a.contactForm),c(2),g(p?4:3),c(36),C("name",a.contactName())("imageUrl",(l=(l=a.contactForm.get("avatar"))==null?null:l.value)!==null&&l!==void 0?l:""),c(2),j(" ",a.contactForm.invalid," "),c(2),g(p?44:43)}},dependencies:[G,Z,P,H,A,L,U,z,q,Q,K],encapsulation:2})}}return r})();export{xe as CreateEditContactComponent};
