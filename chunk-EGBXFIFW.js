import{f as R,g as j,h as d,i as V,j as B,k as I,m as G,n as L,o as $,p as A,q as U,r as H,t as O}from"./chunk-OJG2KOKQ.js";import{a as Z}from"./chunk-QP54F5JF.js";import{a as P}from"./chunk-KZOAHJRE.js";import{Ba as N,Ha as S,Ja as _,La as h,M as v,Ra as p,Ua as g,V as c,Ya as t,Za as n,_a as l,a as y,aa as E,ab as D,ba as k,bb as f,gb as a,ma as w,na as F,nb as T,s as C,ub as q,xb as z,ya as u,yb as x,zb as M}from"./chunk-ANTMNTRI.js";var J=(()=>{class r{constructor(){this.formControl=c(V),this.elementRef=c(F),this.renderer=c(N),this.changeDetectorRef=c(q),this.statusChangesSub=null,this.customMessages="",this.defaultMessages={required:"This field is required.",email:"Invalid email address.",minlength:"Too short.",maxlength:"Too long.",pattern:"Invalid format."},this.formControlElement=this.elementRef.nativeElement,this.errorEl=this.renderer.createElement("small")}onBlur(e){let o=this.elementRef.nativeElement.parentElement;this.updateErrorDisplay(this.formControl)}ngOnInit(){this.statusChangesSub=this.formControl.statusChanges?.pipe(v(e=>console.log(this.formControl.name,e)),C(e=>this.updateErrorDisplay(this.formControl))).subscribe()??null,this.updateErrorDisplay(this.formControl)}updateErrorDisplay(e){console.log(e.invalid,e.dirty,e.touched,e.pristine);let o=this.elementRef.nativeElement.parentElement;if(e.invalid&&e.touched){let i=Object.keys(e.errors??{})[0],s=this.customMessages?this.customMessages[i]:this.defaultMessages[i]??"Invalid field";this.errorEl.textContent=s,this.renderer.addClass(this.errorEl,"text-red-500"),this.renderer.addClass(this.formControlElement,"border-red-300"),o.contains(this.errorEl)||this.renderer.appendChild(o,this.errorEl)}else o.contains(this.errorEl)&&(this.renderer.removeChild(o,this.errorEl),this.renderer.removeClass(this.formControlElement,"border-red-300"));this.changeDetectorRef.detectChanges()}ngOnDestroy(){this.statusChangesSub?.unsubscribe()}static{this.\u0275fac=function(o){return new(o||r)}}static{this.\u0275dir=_({type:r,selectors:[["","caFormFieldError",""]],hostBindings:function(o,i){o&1&&f("blur",function(m){return i.onBlur(m)})},inputs:{customMessages:[0,"caFormFieldError","customMessages"]}})}}return r})();function Q(r,b){r&1&&a(0," Create ")}function W(r,b){r&1&&a(0," Update ")}function X(r,b){r&1&&a(0," Create ")}function Y(r,b){r&1&&a(0," Update ")}var ge=(()=>{class r{#t;#e;constructor(){this.#t=c(P),this.#e=c(H),this.id=w(null),this.selectedContact=x(()=>{let e=this.id();return e?z(()=>this.#t.contactEntityMap()[e]):null}),this.contactForm=this.#e.group({firstName:["",[d.required,d.minLength(3)]],lastName:[""],phone:this.#e.group({number:["",[d.pattern(/^(?:1[-\s]?)?(?:\(\d{3}\)|\d{3})[-.\s]?\d{3}[-.\s]?\d{4}$/)]],extension:["",[d.maxLength(5),d.pattern(/^\d{1,5}$/)]]}),email:["",[d.pattern(/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/)]],company:[""],jobTitle:[""],avatar:["",[d.pattern(/^(https?:\/\/)?(www\.)?[\w\-]+(\.[\w\-]+)+(:\d+)?(\/[^\s]*)?(\?[^\s]*)?(#[^\s]*)?$/)]]}),this.contactName=x(()=>`${this.contactForm.get("firstName")?.value??""} ${this.contactForm.get("lastName")?.value??""}`.trim()),M(()=>{let e=this.selectedContact();e&&this.contactForm.patchValue(y({},e))})}submit(){}onImageError(){this.contactForm.get("profilePicture")?.setErrors({})}static{this.\u0275fac=function(o){return new(o||r)}}static{this.\u0275cmp=S({type:r,selectors:[["ca-create-edit-contact"]],inputs:{id:[1,"id"]},decls:48,vars:6,consts:[[1,"w-auto","flex","flex-col","gap-8","justify-center","bg-white","p-8",3,"formGroup"],[1,"grid","md:grid-cols-2","md:gap-6"],[1,"relative","z-0","w-full","mb-5","group"],["caFormFieldError","","formControlName","firstName","type","text","name","firstName","id","firstName","placeholder"," ","required","",1,"block","py-2.5","px-0","w-full","text-sm","text-gray-900","bg-transparent","border-0","border-b-2","border-gray-300","appearance-none","dark:text-white","dark:border-gray-600","dark:focus:border-blue-500","focus:outline-none","focus:ring-0","focus:border-blue-600","peer"],["for","firstName",1,"peer-focus:font-medium","absolute","text-sm","text-gray-500","dark:text-gray-400","duration-300","transform","-translate-y-6","scale-75","top-3","-z-10","origin-[0]","peer-focus:start-0","rtl:peer-focus:translate-x-1/4","peer-focus:text-blue-600","peer-focus:dark:text-blue-500","peer-placeholder-shown:scale-100","peer-placeholder-shown:translate-y-0","peer-focus:scale-75","peer-focus:-translate-y-6"],["caFormFieldError","","formControlName","lastName","type","text","name","lastName","id","lastName","placeholder"," ","required","",1,"block","py-2.5","px-0","w-full","text-sm","text-gray-900","bg-transparent","border-0","border-b-2","border-gray-300","appearance-none","dark:text-white","dark:border-gray-600","dark:focus:border-blue-500","focus:outline-none","focus:ring-0","focus:border-blue-600","peer"],["for","lastName",1,"peer-focus:font-medium","absolute","text-sm","text-gray-500","dark:text-gray-400","duration-300","transform","-translate-y-6","scale-75","top-3","-z-10","origin-[0]","peer-focus:start-0","rtl:peer-focus:translate-x-1/4","peer-focus:text-blue-600","peer-focus:dark:text-blue-500","peer-placeholder-shown:scale-100","peer-placeholder-shown:translate-y-0","peer-focus:scale-75","peer-focus:-translate-y-6"],["formGroupName","phone",1,"grid","md:grid-cols-2","md:gap-6"],["caFormFieldError","","formControlName","number","type","text","name","number","id","number","placeholder"," ","required","",1,"block","py-2.5","px-0","w-full","text-sm","text-gray-900","bg-transparent","border-0","border-b-2","border-gray-300","appearance-none","dark:text-white","dark:border-gray-600","dark:focus:border-blue-500","focus:outline-none","focus:ring-0","focus:border-blue-600","peer"],["for","number",1,"peer-focus:font-medium","absolute","text-sm","text-gray-500","dark:text-gray-400","duration-300","transform","-translate-y-6","scale-75","top-3","-z-10","origin-[0]","peer-focus:start-0","rtl:peer-focus:translate-x-1/4","peer-focus:text-blue-600","peer-focus:dark:text-blue-500","peer-placeholder-shown:scale-100","peer-placeholder-shown:translate-y-0","peer-focus:scale-75","peer-focus:-translate-y-6"],["caFormFieldError","","formControlName","extension","type","text","name","extension","id","extension","placeholder"," ","required","",1,"block","py-2.5","px-0","w-full","text-sm","text-gray-900","bg-transparent","border-0","border-b-2","border-gray-300","appearance-none","dark:text-white","dark:border-gray-600","dark:focus:border-blue-500","focus:outline-none","focus:ring-0","focus:border-blue-600","peer"],["for","extension",1,"peer-focus:font-medium","absolute","text-sm","text-gray-500","dark:text-gray-400","duration-300","transform","-translate-y-6","scale-75","top-3","-z-10","origin-[0]","peer-focus:start-0","rtl:peer-focus:translate-x-1/4","peer-focus:text-blue-600","peer-focus:dark:text-blue-500","peer-placeholder-shown:scale-100","peer-placeholder-shown:translate-y-0","peer-focus:scale-75","peer-focus:-translate-y-6"],["caFormFieldError","","formControlName","email","type","email","name","email","id","email","placeholder"," ","required","",1,"block","py-2.5","px-0","w-full","text-sm","text-gray-900","bg-transparent","border-0","border-b-2","border-gray-300","appearance-none","dark:text-white","dark:border-gray-600","dark:focus:border-blue-500","focus:outline-none","focus:ring-0","focus:border-blue-600","peer"],["for","email",1,"peer-focus:font-medium","absolute","text-sm","text-gray-500","dark:text-gray-400","duration-300","transform","-translate-y-6","scale-75","top-3","-z-10","origin-[0]","peer-focus:start-0","rtl:peer-focus:translate-x-1/4","rtl:peer-focus:left-auto","peer-focus:text-blue-600","peer-focus:dark:text-blue-500","peer-placeholder-shown:scale-100","peer-placeholder-shown:translate-y-0","peer-focus:scale-75","peer-focus:-translate-y-6"],["caFormFieldError","","formControlName","company","type","text","name","company","id","company","placeholder"," ","required","",1,"block","py-2.5","px-0","w-full","text-sm","text-gray-900","bg-transparent","border-0","border-b-2","border-gray-300","appearance-none","dark:text-white","dark:border-gray-600","dark:focus:border-blue-500","focus:outline-none","focus:ring-0","focus:border-blue-600","peer"],["for","company",1,"peer-focus:font-medium","absolute","text-sm","text-gray-500","dark:text-gray-400","duration-300","transform","-translate-y-6","scale-75","top-3","-z-10","origin-[0]","peer-focus:start-0","rtl:peer-focus:translate-x-1/4","peer-focus:text-blue-600","peer-focus:dark:text-blue-500","peer-placeholder-shown:scale-100","peer-placeholder-shown:translate-y-0","peer-focus:scale-75","peer-focus:-translate-y-6"],["caFormFieldError","","formControlName","jobTitle","type","text","name","jobTitle","id","jobTitle","placeholder"," ","required","",1,"block","py-2.5","px-0","w-full","text-sm","text-gray-900","bg-transparent","border-0","border-b-2","border-gray-300","appearance-none","dark:text-white","dark:border-gray-600","dark:focus:border-blue-500","focus:outline-none","focus:ring-0","focus:border-blue-600","peer"],["for","jobTitle",1,"peer-focus:font-medium","absolute","text-sm","text-gray-500","dark:text-gray-400","duration-300","transform","-translate-y-6","scale-75","top-3","-z-10","origin-[0]","peer-focus:start-0","rtl:peer-focus:translate-x-1/4","peer-focus:text-blue-600","peer-focus:dark:text-blue-500","peer-placeholder-shown:scale-100","peer-placeholder-shown:translate-y-0","peer-focus:scale-75","peer-focus:-translate-y-6"],["caFormFieldError","","formControlName","avatar","type","text","name","avatar","id","avatar","placeholder"," ","required","",1,"block","py-2.5","px-0","w-full","text-sm","text-gray-900","bg-transparent","border-0","border-b-2","border-gray-300","appearance-none","dark:text-white","dark:border-gray-600","dark:focus:border-blue-500","focus:outline-none","focus:ring-0","focus:border-blue-600","peer"],["for","avatar",1,"peer-focus:font-medium","absolute","text-sm","text-gray-500","dark:text-gray-400","duration-300","transform","-translate-y-6","scale-75","top-3","-z-10","origin-[0]","peer-focus:start-0","rtl:peer-focus:translate-x-1/4","peer-focus:text-blue-600","peer-focus:dark:text-blue-500","peer-placeholder-shown:scale-100","peer-placeholder-shown:translate-y-0","peer-focus:scale-75","peer-focus:-translate-y-6"],[3,"name","imageUrl"],[1,"flex","flex-row-reverse","gap-6"],[1,"text-white","bg-blue-700","hover:bg-blue-800","focus:ring-4","focus:ring-blue-300","font-medium","rounded-lg","text-sm","px-5","py-2.5","me-2","mb-2","dark:bg-blue-600","dark:hover:bg-blue-700","focus:outline-none","dark:focus:ring-blue-800",3,"click","disabled"]],template:function(o,i){if(o&1){let s=D();T(0),t(1,"form",0)(2,"h2"),h(3,Q,1,0)(4,W,1,0),a(5," Contact"),n(),t(6,"div",1)(7,"div",2),l(8,"input",3),t(9,"label",4),a(10,"First name"),n()(),t(11,"div",2),l(12,"input",5),t(13,"label",6),a(14,"Last name"),n()()(),t(15,"div",7)(16,"div",2),l(17,"input",8),t(18,"label",9),a(19,"Phone"),n()(),t(20,"div",2),l(21,"input",10),t(22,"label",11),a(23,"Extension"),n()()(),t(24,"div",2),l(25,"input",12),t(26,"label",13),a(27,"Email"),n()(),t(28,"div",1)(29,"div",2),l(30,"input",14),t(31,"label",15),a(32,"Company"),n()(),t(33,"div",2),l(34,"input",16),t(35,"label",17),a(36,"Job title"),n()()(),t(37,"div",1)(38,"div",2),l(39,"input",18),t(40,"label",19),a(41,"Profile image URL"),n()(),t(42,"div",2),l(43,"ca-avatar",20),n()(),t(44,"div",21)(45,"button",22),f("click",function(){return E(s),k(i.submit())}),h(46,X,1,0)(47,Y,1,0),n()()()}if(o&2){let s,m=i.selectedContact();u(),p("formGroup",i.contactForm),u(2),g(m?4:3),u(40),p("name",i.contactName())("imageUrl",(s=(s=i.contactForm.get("avatar"))==null?null:s.value)!==null&&s!==void 0?s:""),u(2),p("disabled",!i.contactForm.valid),u(),g(m?47:46)}},dependencies:[R,O,G,j,B,I,U,L,A,$,J,Z],encapsulation:2})}}return r})();export{ge as CreateEditContactComponent};
